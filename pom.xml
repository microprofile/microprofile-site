<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>io.microprofile</groupId>
  <artifactId>microprofile-io</artifactId>
  <version>0.0.1-SNAPSHOT</version>
  <packaging>war</packaging>
  <name>microprofile :: IO :: Website</name>

  <properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <tomee.version>7.0.0-M3</tomee.version>
    <microprofile.api>7.0</microprofile.api>
    <groovy.version>2.4.6</groovy.version>

    <microprofileio_github_atoken>${env.github_atoken}</microprofileio_github_atoken>
    <microprofileio_twitter_oauth_consumer_key>${env.project_twitter_oauth_consumer_key}</microprofileio_twitter_oauth_consumer_key>
    <microprofileio_twitter_oauth_consumer_secret>${env.project_twitter_oauth_consumer_secret}</microprofileio_twitter_oauth_consumer_secret>
    <microprofileio_twitter_oauth_access_token>${env.project_twitter_oauth_access_token}</microprofileio_twitter_oauth_access_token>
    <microprofileio_twitter_oauth_access_token_secret>${env.project_twitter_oauth_access_token_secret}</microprofileio_twitter_oauth_access_token_secret>
  </properties>

  <repositories>
    <repository>
      <id>twitter4j.org</id>
      <name>twitter4j.org Repository</name>
      <url>http://twitter4j.org/maven2</url>
      <releases>
        <enabled>true</enabled>
      </releases>
      <snapshots>
        <enabled>true</enabled>
      </snapshots>
    </repository>
  </repositories>

  <dependencies>
    <dependency>
      <groupId>org.twitter4j</groupId>
      <artifactId>twitter4j-core</artifactId>
      <version>4.0.4</version>
    </dependency>
    <dependency>
      <groupId>org.tomitribe</groupId>
      <artifactId>sabot</artifactId>
      <version>0.9</version>
    </dependency>
    <dependency>
      <groupId>org.apache.tomee</groupId>
      <artifactId>microprofile-api</artifactId>
      <version>${microprofile.api}</version>
      <scope>provided</scope>
    </dependency>
    <dependency>
      <groupId>org.codehaus.groovy</groupId>
      <artifactId>groovy-json</artifactId>
      <version>${groovy.version}</version>
    </dependency>
    <dependency>
      <groupId>org.codehaus.groovy</groupId>
      <artifactId>groovy-xml</artifactId>
      <version>${groovy.version}</version>
    </dependency>
    <dependency>
      <groupId>org.yaml</groupId>
      <artifactId>snakeyaml</artifactId>
      <version>1.16</version>
    </dependency>
    <dependency>
      <groupId>org.spockframework</groupId>
      <artifactId>spock-core</artifactId>
      <version>1.0-groovy-2.4</version>
      <scope>test</scope>
    </dependency>
    <dependency> <!-- enables mocking of classes (in addition to interfaces) -->
      <groupId>cglib</groupId>
      <artifactId>cglib-nodep</artifactId>
      <version>3.1</version>
      <scope>test</scope>
    </dependency>
    <dependency> <!-- enables mocking of classes without default constructor (together with CGLIB) -->
      <groupId>org.objenesis</groupId>
      <artifactId>objenesis</artifactId>
      <version>2.1</version>
      <scope>test</scope>
    </dependency>
  </dependencies>
  <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-war-plugin</artifactId>
        <version>2.6</version>
        <configuration>
          <failOnMissingWebXml>false</failOnMissingWebXml>
          <attachClasses>true</attachClasses>
          <webResources>
            <resource>
              <directory>target/static-resources</directory>
            </resource>
          </webResources>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.apache.tomee.maven</groupId>
        <artifactId>tomee-maven-plugin</artifactId>
        <version>${tomee.version}</version>
        <configuration>
          <context>microprofile-io</context>
          <systemVariables>
            <microprofileio_github_atoken>${microprofileio_github_atoken}</microprofileio_github_atoken>
            <microprofileio_twitter_oauth_consumer_key>${microprofileio_twitter_oauth_consumer_key}</microprofileio_twitter_oauth_consumer_key>
            <microprofileio_twitter_oauth_consumer_secret>${microprofileio_twitter_oauth_consumer_secret}</microprofileio_twitter_oauth_consumer_secret>
            <microprofileio_twitter_oauth_access_token>${microprofileio_twitter_oauth_access_token}</microprofileio_twitter_oauth_access_token>
            <microprofileio_twitter_oauth_access_token_secret>${microprofileio_twitter_oauth_access_token_secret}</microprofileio_twitter_oauth_access_token_secret>
            <!--<microprofileio_config_root>tveronezi/microprofile.io.config</microprofileio_config_root>-->
          </systemVariables>
        </configuration>
      </plugin>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>codenarc-maven-plugin</artifactId>
        <version>0.22-1</version>
        <configuration>
          <sourceDirectory>${project.basedir}/src/main/groovy</sourceDirectory>
          <groovyVersion>${groovy.version}</groovyVersion>
          <maxPriority1Violations>0</maxPriority1Violations>
          <maxPriority2Violations>0</maxPriority2Violations>
          <maxPriority3Violations>0</maxPriority3Violations>
        </configuration>
        <executions>
          <execution>
            <phase>prepare-package</phase>
            <goals>
              <goal>codenarc</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <artifactId>maven-compiler-plugin</artifactId>
        <version>3.1</version>
        <configuration>
          <compilerId>groovy-eclipse-compiler</compilerId>
        </configuration>
        <dependencies>
          <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy-eclipse-compiler</artifactId>
            <version>2.9.2-01</version>
          </dependency>
          <dependency>
            <groupId>org.codehaus.groovy</groupId>
            <artifactId>groovy-eclipse-batch</artifactId>
            <version>2.4.3-01</version>
          </dependency>
        </dependencies>
      </plugin>
      <plugin>
        <groupId>com.github.eirslett</groupId>
        <artifactId>frontend-maven-plugin</artifactId>
        <version>1.0</version>
        <executions>
          <execution>
            <id>install-node-and-npm</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>install-node-and-npm</goal>
            </goals>
            <configuration>
              <nodeVersion>v5.10.1</nodeVersion>
              <npmVersion>3.8.6</npmVersion>
            </configuration>
          </execution>
          <execution>
            <id>npm-install</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>npm</goal>
            </goals>
            <configuration>
              <arguments>install</arguments>
            </configuration>
          </execution>
          <execution>
            <id>bower-install</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>bower</goal>
            </goals>
            <configuration>
              <arguments>install</arguments>
            </configuration>
          </execution>
          <execution>
            <id>gulp-build</id>
            <phase>generate-resources</phase>
            <goals>
              <goal>gulp</goal>
            </goals>
            <configuration>
              <arguments>build-with-tests</arguments>
            </configuration>
          </execution>
        </executions>
        <configuration>
          <workingDirectory>src/main/static</workingDirectory>
        </configuration>
      </plugin>
    </plugins>
  </build>

  <scm>
    <url>scm:git:git@github.com:microprofile/microprofile.io.git</url>
    <connection>scm:git:git@github.com:microprofile/microprofile.io.git</connection>
    <developerConnection>scm:git:git@github.com:microprofile/microprofile.io.git</developerConnection>
    <tag>0.0.1</tag>
  </scm>

</project>
